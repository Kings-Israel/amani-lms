import{d as H,bs as Q,k as c,aD as w,M as J,r as P,o as m,c as h,p as a,w as l,F as z,a as A,bm as L,bh as C,bt as U,m as e,x as r,s as K,G as y,q as u,bo as x,z as N,b as W,E as X,A as S,a1 as Y,a2 as Z,bl as ee}from"./main.cad6ac3f.js";import{a as te}from"./formatters.6aea8434.js";import{a as T}from"./axios.5c415fe0.js";import{V as R}from"./VSelect.5ef069f5.js";import{V as ae}from"./VSpacer.1e6a1f4b.js";import{V as se}from"./VTextField.6ab6d276.js";import{V}from"./VBtn.a52c8ee1.js";import{V as M}from"./VDivider.c04ee9aa.js";import{V as le,a as oe}from"./VTable.3c6a2e52.js";import{V as re}from"./VChip.aff1fc4b.js";import{V as ne}from"./VMenu.3e23c506.js";import{V as ie,a as I}from"./VList.319559ef.js";import"./scopeId.6c05b8dd.js";import"./VCheckboxBtn.546c055a.js";const ce={class:"d-flex align-center gap-2 my-1"},ue={class:"text-h6"},de={class:"me-3",style:{width:"80px"}},pe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},me={style:{width:"10rem"}},fe=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," CUSTOMER NAME "),e("th",{scope:"col"}," CUSTOMER ID "),e("th",{scope:"col"}," CUSTOMER PHONE NUMBER "),e("th",{scope:"col"}," AMOUNT "),e("th",{scope:"col"}," CREATED ON "),e("th",{scope:"col"}," INSTALLMENTS "),e("th",{scope:"col"}," INTEREST RATE(%) "),e("th",{scope:"col"}," AMOUNT PAID "),e("th",{scope:"col"}," ACTIONS ")])],-1),ve={class:"d-flex align-center"},he={key:1},_e={class:"d-flex flex-column"},be={class:"text-base"},xe={class:"text-sm text-disabled"},Ve={class:"text-capitalize text-base"},ge={class:"text-capitalize text-base font-weight-semibold"},we={class:"text-base"},Ue={class:"text-center",style:{width:"5rem"}},ye=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Ne=[ye],Se={class:"text-sm text-disabled"},Fe=H({__name:"index",setup(Te){const k=Q("UserListStore",{actions:{fetchUsers(s){return T.get("apps/users/list",{params:s})},addUser(s){return new Promise((o,v)=>{T.post("/apps/users/user",{user:s}).then(i=>o(i)).catch(i=>v(i))})},fetchUser(s){return new Promise((o,v)=>{T.get(`/apps/users/${s}`).then(i=>o(i)).catch(i=>v(i))})}}})(),_=c(""),b=c(),O=c(),B=c(),d=c(10),n=c(1),p=c(1),D=c(0),f=c([]),E=()=>{k.fetchUsers({q:_.value,status:B.value,plan:O.value,role:b.value,perPage:d.value,currentPage:n.value}).then(s=>{console.log(s),f.value=s.data.users,p.value=s.data.totalPage,D.value=s.data.totalUsers}).catch(s=>{console.error(s)})};w(E),w(()=>{n.value>p.value&&(n.value=p.value)});const $=[{title:"Nairobi",value:"nairobi"},{title:"Mombasa",value:"mombasa"},{title:"Nakuru",value:"nakuru"}],g=s=>s==="subscriber"?{color:"warning",icon:"tabler-user"}:s==="author"?{color:"success",icon:"tabler-circle-check"}:s==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:s==="editor"?{color:"info",icon:"tabler-pencil"}:s==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},j=s=>s==="pending"?"warning":s==="active"?"success":s==="inactive"?"secondary":"primary";w(()=>{n.value>p.value&&(n.value=p.value)});const F=J(()=>{const s=f.value.length?(n.value-1)*d.value+1:0,o=f.value.length+(n.value-1)*d.value;return`Showing ${s} to ${o} of ${D.value} entries`}),q=s=>{k.addUser(s),E()},G=[{icon:"tabler-user",color:"primary",title:"Session",stats:"21,459",percentage:29,subtitle:"Total Users"},{icon:"tabler-user-plus",color:"error",title:"Paid Users",stats:"4,567",percentage:18,subtitle:"Last week analytics"},{icon:"tabler-user-check",color:"success",title:"Active Users",stats:"19,860",percentage:-14,subtitle:"Last week analytics"},{icon:"tabler-user-exclamation",color:"warning",title:"Pending Users",stats:"237",percentage:42,subtitle:"Last week analytics"}];return(s,o)=>{const v=P("RouterLink"),i=P("AddNewUserDrawer");return m(),h("section",null,[a(ee,null,{default:l(()=>[(m(),h(z,null,A(G,t=>a(L,{key:t.title,cols:"12",sm:"6",lg:"3"},{default:l(()=>[a(C,null,{default:l(()=>[a(U,{class:"d-flex justify-space-between"},{default:l(()=>[e("div",null,[e("span",null,r(t.title),1),e("div",ce,[e("h6",ue,r(t.stats),1),e("span",{class:K(t.percentage>0?"text-success":"text-error")},"("+r(t.percentage)+"%)",3)]),e("span",null,r(t.subtitle),1)]),a(y,{rounded:"",variant:"tonal",color:t.color,icon:t.icon},null,8,["color","icon"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),64)),a(L,{cols:"12"},{default:l(()=>[a(C,{title:"Registered Customers"},{default:l(()=>[a(U,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[e("div",de,[a(R,{modelValue:u(d),"onUpdate:modelValue":o[0]||(o[0]=t=>x(d)?d.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(ae),e("div",pe,[a(R,{modelValue:u(b),"onUpdate:modelValue":o[1]||(o[1]=t=>x(b)?b.value=t:null),label:"Select Branch",items:$,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"]),e("div",me,[a(se,{modelValue:u(_),"onUpdate:modelValue":o[2]||(o[2]=t=>x(_)?_.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),a(V,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:l(()=>[N(" Export ")]),_:1})])]),_:1}),a(M),a(le,{class:"text-no-wrap"},{default:l(()=>[fe,e("tbody",null,[(m(!0),h(z,null,A(u(f),t=>(m(),h("tr",{key:t.id,style:{height:"3.75rem"}},[e("td",null,[e("div",ve,[a(y,{variant:"tonal",color:g(t.role).color,class:"me-3",size:"38"},{default:l(()=>[t.avatar?(m(),W(X,{key:0,src:t.avatar},null,8,["src"])):(m(),h("span",he,r(u(te)(t.fullName)),1))]),_:2},1032,["color"]),e("div",_e,[e("h6",be,[a(v,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"font-weight-medium user-list-name"},{default:l(()=>[N(r(t.fullName),1)]),_:2},1032,["to"])]),e("span",xe,"@"+r(t.email),1)])])]),e("td",null,[a(y,{color:g(t.role).color,icon:g(t.role).icon,variant:"tonal",size:"30",class:"me-4"},null,8,["color","icon"]),e("span",Ve,r(t.role),1)]),e("td",null,[e("span",ge,r(t.currentPlan),1)]),e("td",null,[e("span",we,r(t.billing),1)]),e("td",null,[a(re,{label:"",color:j(t.status),size:"small",class:"text-capitalize"},{default:l(()=>[N(r(t.status),1)]),_:2},1032,["color"])]),e("td",Ue,[a(V,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[a(S,{size:"22",icon:"tabler-edit"})]),_:1}),a(V,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[a(S,{size:"22",icon:"tabler-trash"})]),_:1}),a(V,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[a(S,{size:"22",icon:"tabler-dots-vertical"}),a(ne,{activator:"parent"},{default:l(()=>[a(ie,null,{default:l(()=>[a(I,{title:"View",to:{name:"apps-user-view-id",params:{id:t.id}}},null,8,["to"]),a(I,{title:"Suspend",href:"javascript:void(0)"})]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),Y(e("tfoot",null,Ne,512),[[Z,!u(f).length]])]),_:1}),a(M),a(U,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:l(()=>[e("span",Se,r(u(F)),1),a(oe,{modelValue:u(n),"onUpdate:modelValue":o[3]||(o[3]=t=>x(n)?n.value=t:null),size:"small","total-visible":5,length:u(p)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),a(i,{isDrawerOpen:s.isAddNewUserDrawerVisible,"onUpdate:isDrawerOpen":o[4]||(o[4]=t=>s.isAddNewUserDrawerVisible=t),onUserData:q},null,8,["isDrawerOpen"])])}}});export{Fe as default};
